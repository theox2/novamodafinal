<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Favoritos ‚Äì NovaModa</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .container-favorites {
      max-width: 1200px;
      margin: 0 auto;
      padding: 120px 20px 60px;
    }

    .page-header-fav {
      margin-bottom: 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }

    .page-title-fav {
      font-size: 2.5rem;
      color: #fff;
      margin: 0;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .fav-count {
      font-size: 1rem;
      color: #888;
      font-weight: 400;
    }

    .clear-all-btn {
      padding: 10px 20px;
      background: transparent;
      border: 1px solid #ff3b30;
      color: #ff3b30;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all .2s;
    }

    .clear-all-btn:hover {
      background: #ff3b30;
      color: #fff;
    }

    /* Grid de favoritos */
    .favorites-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 24px;
    }

    .fav-item {
      background: #111;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all .3s ease;
      border: 1px solid #222;
      position: relative;
    }

    .fav-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(20, 208, 214, 0.3);
      border-color: var(--accent);
    }

    .fav-img-wrapper {
      position: relative;
      width: 100%;
      height: 320px;
      overflow: hidden;
      background: #0b0b0b;
    }

    .fav-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform .5s ease;
    }

    .fav-item:hover img {
      transform: scale(1.08);
    }

    .remove-fav {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(255, 59, 48, 0.9);
      color: #fff;
      width: 38px;
      height: 38px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      transition: all .2s;
      z-index: 10;
      border: none;
    }

    .remove-fav:hover {
      background: #ff3b30;
      transform: scale(1.1);
    }

    .add-to-cart-btn {
      position: absolute;
      bottom: 12px;
      left: 12px;
      right: 12px;
      padding: 12px;
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      opacity: 0;
      transform: translateY(10px);
      transition: all .3s;
    }

    .fav-item:hover .add-to-cart-btn {
      opacity: 1;
      transform: translateY(0);
    }

    .add-to-cart-btn:hover {
      background: #fff;
    }

    .fav-info {
      padding: 16px;
    }

    .fav-name {
      font-size: 16px;
      color: #fff;
      margin-bottom: 10px;
      font-weight: 600;
      line-height: 1.3;
    }

    .fav-price {
      font-size: 22px;
      color: var(--accent);
      font-weight: 800;
    }

    /* Empty state */
    .empty-favorites {
      text-align: center;
      padding: 80px 20px;
      background: #111;
      border-radius: 12px;
      border: 1px solid #222;
    }

    .empty-fav-icon {
      font-size: 80px;
      margin-bottom: 20px;
    }

    .empty-favorites h2 {
      font-size: 28px;
      margin-bottom: 15px;
      color: #fff;
    }

    .empty-favorites p {
      color: #888;
      margin-bottom: 30px;
      font-size: 16px;
    }

    /* Toast notification */
    .toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--accent);
      color: #000;
      padding: 16px 24px;
      border-radius: 8px;
      font-weight: 600;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      z-index: 9999;
      animation: slideIn 0.3s ease;
      display: none;
    }

    .toast.show {
      display: block;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Responsive */
    @media(max-width: 768px) {
      .page-title-fav {
        font-size: 1.8rem;
      }
      
      .favorites-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 15px;
      }

      .fav-img-wrapper {
        height: 220px;
      }

      .clear-all-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <!-- LOADER -->
  <div id="loader">
    <div class="spinner"></div>
  </div>

  <!-- HEADER -->
  <header class="header">
    <div class="header-container">
      <div class="logo-area" onclick="location.href='index.html'">
        <img src="Yellow_Black_Brush_Streetwear_Brand_Logo-removebg-preview.png" class="logo" alt="NovaModa">
        <span class="brand">NovaModa</span>
      </div>
      
      <nav class="nav-desktop" id="navDesktop">
        <div class="nav-item">
          <a href="index.html#novidades" class="nav-link">Novidades</a>
        </div>
        <div class="nav-item dropdown" id="catDropdown">
          <a href="#" class="dropdown-toggle nav-link">Categorias</a>
          <div class="mega-menu">
            <div class="mega-col">
              <h4>Por p√∫blico</h4>
              <a href="categorias.html?cat=masculino">Masculino</a>
              <a href="categorias.html?cat=feminino">Feminino</a>
              <a href="categorias.html?cat=infantil">Infantil</a>
            </div>
          </div>
        </div>
        <div class="nav-item">
          <a href="index.html#promocoes" class="nav-link">Promo√ß√µes</a>
        </div>
      </nav>

      <div class="right-area">
        <div class="search-wrapper">
          <input id="headerSearch" type="search" placeholder="Buscar produtos..." aria-label="Buscar">
          <button id="searchBtn" aria-label="Pesquisar">üîç</button>
        </div>
        <div id="smartSearchResults" class="smart-search-results"></div>

        <a class="btn entrar-btn" href="login.html">Entrar</a>

        <div class="icons">
          <span class="icon" onclick="location.href='favoritos.html'">‚ù§</span>
          <span class="icon" onclick="location.href='carrinho.html'">üõí<span class="cart-count">0</span></span>
          <span class="icon" id="menuBtnMobile">‚ò∞</span>
        </div>
      </div>
    </div>

    <!-- MOBILE MENU -->
    <div class="mobile-menu" id="mobileMenu">
      <a href="index.html#novidades">Novidades</a>
      <a href="categorias.html">Categorias</a>
      <a href="index.html#promocoes">Promo√ß√µes</a>
      <a href="login.html">Entrar</a>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container-favorites">
    <div class="page-header-fav">
      <div>
        <h1 class="page-title-fav">
          ‚ù§ Meus Favoritos
          <span class="fav-count" id="favCount">0 itens</span>
        </h1>
      </div>
      <button class="clear-all-btn" id="clearAllBtn" style="display:none">Limpar Tudo</button>
    </div>

    <!-- Empty Favorites -->
    <div class="empty-favorites" id="emptyFavorites">
      <div class="empty-fav-icon">üíî</div>
      <h2>Nenhum favorito ainda</h2>
      <p>Adicione produtos aos favoritos para acompanh√°-los aqui!</p>
      <a href="categorias.html" class="btn primary">Explorar Produtos</a>
    </div>

    <!-- Favorites Grid -->
    <div class="favorites-grid" id="favoritesGrid" style="display:none">
      <!-- Produtos favoritos inseridos via JS -->
    </div>
  </main>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <!-- SCRIPTS -->
  <script src="js/animations.js"></script>
  <script src="js/favorites.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/app.js"></script>

  <script>
    // Base de produtos
    const produtosDB = [
      {id:1, name:'Camiseta Oversized Street', price:129.90, img:'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=800'},
      {id:2, name:'Moletom Premium Black', price:249.90, img:'https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=800'},
      {id:3, name:'Cal√ßa Cargo Utility', price:189.90, img:'https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?w=800'},
      {id:4, name:'Jaqueta Bomber Vintage', price:299.90, img:'https://images.unsplash.com/photo-1551028719-00167b16eac5?w=800'},
      {id:5, name:'T√™nis Air Classic', price:599.90, img:'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=800'},
      {id:6, name:'Bon√© Snapback Logo', price:79.90, img:'https://images.unsplash.com/photo-1588850561407-ed78c282e89b?w=800'},
      {id:7, name:'Cropped Top Sport', price:99.90, img:'https://images.unsplash.com/photo-1583496661160-fb5886a0aaaa?w=800'},
      {id:8, name:'Legging High Waist', price:149.90, img:'https://images.unsplash.com/photo-1506629082955-511b1aa562c8?w=800'},
      {id:9, name:'Shorts Cargo Kids', price:89.90, img:'https://images.unsplash.com/photo-1519238263530-99bdd11df2ea?w=800'},
      {id:10, name:'Mochila Urban Pro', price:159.90, img:'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=800'}
    ];

    let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

    // Renderizar favoritos
    function renderFavorites() {
      const grid = document.getElementById('favoritesGrid');
      const empty = document.getElementById('emptyFavorites');
      const clearBtn = document.getElementById('clearAllBtn');
      const countEl = document.getElementById('favCount');

      countEl.textContent = `${favorites.length} ${favorites.length === 1 ? 'item' : 'itens'}`;

      if (favorites.length === 0) {
        grid.style.display = 'none';
        empty.style.display = 'block';
        clearBtn.style.display = 'none';
        return;
      }

      grid.style.display = 'grid';
      empty.style.display = 'none';
      clearBtn.style.display = 'block';

      // Pega produtos favoritos
      const produtosFavoritos = produtosDB.filter(p => favorites.includes(p.id));

      grid.innerHTML = produtosFavoritos.map(p => `
        <div class="fav-item">
          <div class="fav-img-wrapper" onclick="location.href='produto.html?id=${p.id}'">
            <img src="${p.img}" alt="${p.name}" loading="lazy">
            <button class="remove-fav" onclick="event.stopPropagation();removeFavorite(${p.id})" title="Remover dos favoritos">
              √ó
            </button>
            <button class="add-to-cart-btn" onclick="event.stopPropagation();addToCartFromFav(${p.id})">
              üõí Adicionar ao Carrinho
            </button>
          </div>
          <div class="fav-info">
            <div class="fav-name">${p.name}</div>
            <div class="fav-price">R$ ${p.price.toFixed(2).replace('.',',')}</div>
          </div>
        </div>
      `).join('');
    }

    // Remover favorito
    function removeFavorite(id) {
      favorites = favorites.filter(f => f !== id);
      localStorage.setItem('favorites', JSON.stringify(favorites));
      renderFavorites();
      showToast('Removido dos favoritos');
    }

    // Limpar todos
    document.getElementById('clearAllBtn').addEventListener('click', () => {
      if (confirm('Deseja realmente remover todos os favoritos?')) {
        favorites = [];
        localStorage.setItem('favorites', JSON.stringify(favorites));
        renderFavorites();
        showToast('Todos os favoritos foram removidos');
      }
    });

    // Adicionar ao carrinho
    function addToCartFromFav(id) {
      const produto = produtosDB.find(p => p.id === id);
      if (!produto) return;

      let cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const exists = cart.find(item => item.id === id);

      if (exists) {
        exists.qty++;
      } else {
        cart.push({ id: produto.id, name: produto.name, price: produto.price, img: produto.img, qty: 1 });
      }

      localStorage.setItem('cart', JSON.stringify(cart));
      
      // Atualiza contador
      if (typeof updateCartCount === 'function') {
        updateCartCount();
      }

      showToast('‚úì Adicionado ao carrinho!');
    }

    // Toast notification
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Atualizar contador do carrinho
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const count = cart.reduce((sum, i) => sum + (i.qty || 1), 0);
      document.querySelectorAll('.cart-count').forEach(el => {
        el.textContent = count;
      });
    }

    // Inicializa√ß√£o
    document.addEventListener('DOMContentLoaded', () => {
      renderFavorites();
      updateCartCount();
    });

    // Expor fun√ß√µes globalmente
    window.removeFavorite = removeFavorite;
    window.addToCartFromFav = addToCartFromFav;
  </script>
  <script src="js/storage.js"></script>       <!-- 1¬∫ - BASE -->
<script src="js/auth.js"></script>          <!-- 2¬∫ - Login -->
<script src="js/animations.js"></script>    <!-- 3¬∫ - Anima√ß√µes -->
<script src="js/cart.js"></script>          <!-- 4¬∫ - Carrinho -->
<script src="js/app.js"></script>           <!-- 5¬∫ - Funcionalidades gerais -->
</body>
</html>